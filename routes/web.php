<?php

use Illuminate\Support\Facades\Route;

/*
|--------------------------------------------------------------------------
| Web Routes
|--------------------------------------------------------------------------
|
| Here is where you can register web routes for your application. These
| routes are loaded by the RouteServiceProvider within a group which
| contains the "web" middleware group. Now create something great!
|
*/

Route::get('/', function () {
    return view('welcome');
});

Auth::routes();

//Route::get('/home', 'HomeController@index')->name('home');


/*Route::get('/admin', function() {
    return view('home');
})->name('admin')->middleware('auth');*/

Route::group(['middleware' => 'auth'], function (){

    Route::get('/admin', 'HomeController@index')->name('admin');
    Route::get('/admin/employee', 'Admin\EmployeeController@index')->name('admin.employee');

    Route::get('/admin/employee/edit/{id}', [
        'as' => 'admin.employee.edit', 'uses' => 'Admin\EmployeeController@get_employee_by_id', 'where' => ['id'=>'[0-9]+']
    ]);
    Route::post('/admin/employee/edit', ['as' => 'admin.employee.send_edit', 'uses' => 'Admin\EmployeeController@update_employee_by_id']);

    Route::post('/admin/employee/delete', ['as' => 'admin.employee.delete', 'uses' => 'Admin\EmployeeController@delete_employee'] );

    Route::get('/admin/employee/autocomplete', 'Admin\EmployeeController@autocomplete')->name('admin.employee.autocomplete');



    Route::get('/admin/position', 'Admin\PositionController@index')->name('admin.position');

    Route::get('/admin/position/add', ['as' => 'admin.position.add', 'uses' => 'Admin\PositionController@add_position']);
    Route::post('/admin/position/save', ['as' => 'admin.position.save','uses' => 'Admin\PositionController@save_position']);

    Route::get('/admin/position/edit/{id}', [
        'as' => 'admin.position.edit', 'uses' => 'Admin\PositionController@get_position_by_id', 'where' => ['id'=>'[0-9]+']
    ]);
    Route::post('/admin/position/edit', ['as' => 'admin.position.send_edit', 'uses' => 'Admin\PositionController@update_position_by_id']);

    //Route::get('/admin/position/delete/{id}', ['as' => 'admin.position.delete', 'uses' => 'Admin\PositionController@delete_position'] );
    Route::post('/admin/position/delete', ['as' => 'admin.position.delete', 'uses' => 'Admin\PositionController@delete_position'] );


    /*Route::get('/admin/pages', function (){
        return view('vendor.adminlte.page');
    });*/

});
