$(function() {
    $('body').on('click', '.position-del', function () {
        let id = $(this).data('id');
        console.log(id);
        swal({
            title: "Are you sure?",
            text: "Once deleted, you will not be able to recover this position!",
            icon: "warning",
            buttons: true,
            dangerMode: true,
        })
        .then((willDelete) => {
            if (willDelete) {
                $.ajax({
                    type: "POST",
                    url: '/admin/position/delete',
                    headers: {'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')},
                    dataType: 'json',
                    data: {id: id},
                    success: function(data){
                        if(data.code === 200) {
                            swal(data.mess, {
                                icon: "success",
                            });
                            $('#position-table').DataTable().ajax.reload();
                        }
                    }
                });
            } else {
                swal("Your imaginary position is safe!");
            }
        });
    });

    $('body').on('click', '.employee-del', function () {
        let id = $(this).data('id');
        console.log(id);
        swal({
            title: "Are you sure?",
            text: "Once deleted, you will not be able to recover this employee!",
            icon: "warning",
            buttons: true,
            dangerMode: true,
        })
            .then((willDelete) => {
                if (willDelete) {
                    $.ajax({
                        type: "POST",
                        url: '/admin/employee/delete',
                        headers: {'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')},
                        dataType: 'json',
                        data: {id: id},
                        success: function(data){
                            if(data.code === 200) {
                                swal(data.mess, {
                                    icon: "success",
                                });
                                $('#employee-table').DataTable().ajax.reload();
                            }
                        }
                    });
                } else {
                    swal("Your imaginary position is safe!");
                }
            });
    });

});
